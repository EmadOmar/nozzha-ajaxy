/**
 * Nozzha Ajaxy 1.0
 * 
 * @link https://github.com/EmadOmar/nozzha-ajaxy/
 * @copyright (c) 2014, Nozzha (nozzha.com)
 * @license https://github.com/EmadOmar/nozzha-ajaxy/blob/master/LICENSE The MIT License (MIT)
 */
var $nozzha={ajaxy:{}};!function(a){$nozzha.ajaxy.showFormDialog=function(o,n){return $nozzha.ajaxy.options=a.extend(!0,{autoFocus:!0,dialog:function(a){$nozzha.ajaxy.dialog=bootbox.dialog({message:a,onEscape:function(){$nozzha.ajaxy.options.result(null,!1,-1)}}),$nozzha.ajaxy.options.autoFocus&&$nozzha.ajaxy.dialog.bind("shown.bs.modal",function(){var a=$nozzha.ajaxy.dialog.find("input:text, textarea").first();a.attr("value")&&(a.focus(),a.val(a.val()))})},result:function(){},dialogError:function(){bootbox.dialog({title:'<span class="text-danger">Something went wrong!</span>',message:"An error occurred while proccessing your request. Please check your internet connection, and contact us if you think this is an error.",buttons:{close:{label:"Close",className:"btn-warning"}}})},data:{nozzhaAjaxy:!0}},n),a.get(o,$nozzha.ajaxy.options.data).done(function(a){$nozzha.ajaxy.options.dialog(a)}).fail(function(){$nozzha.ajaxy.options.dialogError()}),this},$nozzha.ajaxy.responseCallback=function(a,o){a&&$nozzha.ajaxy.dialog.modal("hide"),$nozzha.ajaxy.options.result(o,a,a?0:1)},$nozzha.ajaxy.attachToForm=function(o){o.on("beforeSubmit",function(){var n=o.serializeArray();n.push({name:"nozzhaAjaxySubmit",value:!0}),a.post(o.attr("action"),n).done(function(a){$nozzha.ajaxy.responseCallback(!0,a)}).fail(function(){$nozzha.ajaxy.responseCallback(!1,null)})}).on("submit",function(a){return a.preventDefault(),a.stopImmediatePropagation(),!1})}}(jQuery);